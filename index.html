<!doctype html>
<html lang="en">
<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
	<title>Next Movie</title>
</head>
<body>
	<div class="d-flex justify-content-center align-items-center">
		<div class="card" style="width: 25rem; text-align: center;">
			<div class="spinner-border text-success" role="status" style="text-align: center;" id="loader">
				<span class="sr-only">Loading...</span>
			</div>
			<div id="card">
				<div class="card-body">

					<div class="row mn">
						<h3 class="card-title" id="mn"></h3>
						<button class="btn copy" data-toggle="tooltip" data-placement="top" title="Copied!" data-clipboard-target="#mn"><i class="far fa-copy"></i></button>
					</div>

				</div>
				<ul class="list-group list-group-flush" id="details">
						<li class="list-group-item" onclick="showDetails('1')">Year of release
						<h6 id="1"></h6> </li>
						<li class="list-group-item" onclick="showDetails('2')">Duration
						<h6 id="2"></h6> </li>
						<li class="list-group-item" onclick="showDetails('3')">Genre
						<h6 id="3"></h6> </li>
						<li class="list-group-item" onclick="showDetails('4')">Rated
						<h6 id="4"></h6> </li>
				</ul>

				<button type="button" class="btn btn-default next" onclick="callingFn()">Next Movie</button>
				</div>
			</div>

		</div>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>

		<script type="text/javascript">
			var clipboard = new ClipboardJS('.btn');

			clipboard.on('success', function(e) {
				e.clearSelection();
			});

			clipboard.on('error', function(e) {
				console.error('Action:', e.action);
				console.error('Trigger:', e.trigger);
			});

			function showDetails(x) {
				document.getElementById(x).style.display = "block";
			}

			async function callingFn() {

				try {
					document.getElementById("loader").style.display = "block";
					document.getElementById("card").style.display = "none";

					const response = await fetch("https://next-movie.lifeparticle.vercel.app/api", {
						method: "get",
						headers: {
							"Content-Type": "application/json"
						}
					});
					var json = await response.json();

					$(".card-title").html(json.fields["movie_name"]);

					$("#1").html(json.fields["year_of_release"]);
					$("#2").html(json.fields["duration"]);
					$("#3").html(json.fields["genre"]);
					$("#4").html(json.fields["rated"]);

					document.getElementById("1").style.display = "none";
					document.getElementById("2").style.display = "none";
					document.getElementById("3").style.display = "none";
					document.getElementById("4").style.display = "none";

					document.getElementById("loader").style.display = "none";
					document.getElementById("card").style.display = "block";
				} catch (error) {
					console.error("Error:", error);
				}
			}

			callingFn();
		</script>
</body>
</html>